<app-list-layout>
  <ng-container class="header-left">
    <app-icon-button class="back-button" (click)="dialogRef.close()" icon="close" [iconHeight]="'32px'"></app-icon-button>
  </ng-container>
  <ng-container class="header-title">
    Podatki o naročilu
  </ng-container>
  <ng-container class="header-subtitle">
    {{data.restaurantName}}
  </ng-container>

  <ng-container *ngIf="displayScanner then qrScanner else itemList">

  </ng-container>

  <ng-template #qrScanner>
    <div class="scanner-container">
      <zxing-scanner [(device)]="currentDevice"
                     [hidden]="!currentDevice"
                     (scanError)="onScanError($event)"
                     (scanSuccess)="onScanSuccess($event)"
                     (camerasFound)="onCamerasFound($event)"
                     (camerasNotFound)="onCamerasFound($event)"></zxing-scanner>
      <app-loading *ngIf="!currentDevice" [customText]="true">Pridobivam Kamero</app-loading>
    </div>
  </ng-template>

  <ng-template  #itemList>
    <app-restaurant-grid>
      <app-meal-card *ngFor="let item of data.items"
                     [title]="item.quantity + 'x ' + item.name"
                     [info]="item.description"
                     [value]="item.price * item.quantity"
                     [id]="item.id"
                     [showActions]="true"
      >
      </app-meal-card>
    </app-restaurant-grid>
  </ng-template>
  <div class="button-container" *ngIf="!displayScanner">
    <button  (click)="openScanner()" class="scan-button" mat-flat-button color="primary">
      <app-icon [iconName]="'scan'"></app-icon>
      <span>Skeniraj naročilo</span>
    </button>
  </div>

  <div *ngIf="displayScanner" class="qrNameContainer">
    <p *ngIf="!qrResultString">Skenirajte kodo mize</p>
    <p *ngIf="qrResultString"><span>{{qrResultString}}</span></p>
  </div>

  <div class="button-container scanner" *ngIf="displayScanner">
    <button (click)="closeScanner()" class="scan-button action-button" mat-flat-button color="accent">
      <app-icon iconName="close"></app-icon>
    </button>
    <button [disabled]="!qrResultString" (click)="openScanner()" class="scan-button" mat-flat-button color="primary">
      <app-icon [iconName]="'scan'"></app-icon>
      <span>Potrdi</span>
    </button>
  </div>
</app-list-layout>
